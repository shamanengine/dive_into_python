# DNS

## Ключевые характеристики DNS

- Распределенность
  - Ответственность за разные части иерархической структуры несут разные люди или организации
  - Каждый ужел сети в обязательном порядке должен хранить только те данные, которые входят в его зону ответственности

- Кеширование
  - Узел может хранить некоторое количество данных не из своей зоны ответственности для уменьшения нагрузки на сеть
  
- Резервирование
  - За хранение и обслуживание своих узлов (зон) отвечают (обычно) несколько серверов.
  
## Схемы разрешения DNS-имен

- Нерекурсивная
  - Клиент обращается к корневому DNS-серверу с указанием полного доменного имени. Он отвечает клиенту, указывая адрес следующего DNS-сервера. 
  - В свою очередь клиент делает запрос к следующему DNS-серверу, который отсылает его к DNS-серверу нужного нам поддомена и так далее,
пока он не найдет нужный DNS-сервер, который знает информацию о DNS-записях(хранящие соответствие запрошенного имени IP-адресу). 

- Рекурсивная
  - Клиент запрашивает локальный DNS-сервер, если локальный сервер (например роутер) знает ответ, то он сразу же возвращается клиенту. Если нет - выполняются итеративные запросы к корневому серверу как и при нерекурсивной схеме и результат возвращается клиенту.
  
Обычно база данных DNS представляет собой текстовый файл, состоящий из исходных записей RR (resource records)
- А-запись
  - Указывается адрес хоста. Она отображает хост-имя на адрес и может выглядеть так:
  - myhost.mycompany.com IN A 192.168.0.1
  
- АААА-запись
  - Указывается адрес хоста. Она отображает хост-имя на адрес IPv6
  - myhost.mycompany.com IN AAAA 1234:1:2:3:4:567:89cd
  
- CNAME-запись
  - Каноническая запись, обычно используемая для алиасов (псевдонимов). Она позволяет отображать несколько хост-имен на заданный IP-адрес.
  
- NS-запись
  - В каждой зоне должно быть по крайней мере 2 сервера DNS. Записи NS служат для их идентификации другими DNS-серверами, которые пытаются преобразовать имена хостов, относящихся к данной зоне.

- SOA-запись
  - Определяет авторитетную информацию о DNS-зоне.
  - В этой записи указываются такие параметры, как 
    - Primary Name Server - в ней указывается имя первичного DNS-сервера зоны
    - Hostmaster — контактная информация лица, ответственного за администрирование файла зоны.
    - Serial Number — это серийный номер файла зоны, он служит для того, чтобы при каждом обновлении информации увеличивать это число на единичку, чтобы оповестить, что зона была изменена.
    
- PTR-запись.
Обычно мы используем DNS для того, чтобы по имени домена определить IP-адрес.
PTR-запись служит для обратной операции — по IP-адресу определить имя домена.
MX-запись.
С помощью этой записи удаленные сервера электронной почты узнают,
куда же нам отправить почту для вашей зоны.
TXT-запись — это просто запись, содержит текстовые данные.
Иногда эта запись нужна для того, чтобы подтвердить права на этот домен.
Например, вы регистрируетесь в каком-то сервисе, он вам дает некий ключик,
который говорит: запиши, пожалуйста, в TXT-запись.
Вы добавляете эту запись, он проверяет, что такая запись добавлена,
тем самым подтверждая, что вы имеете право на этот домен. 
